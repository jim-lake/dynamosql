import type { Function } from 'node-sql-parser';
import type { EvaluationState, EvaluationResult } from './evaluate';

import {
  abs,
  ceil,
  floor,
  round,
  mod,
  pow,
  sqrt,
  sign,
  bin,
  oct,
  pi,
  degrees,
  radians,
  exp,
  ln,
  log,
  log2,
  log10,
  acos,
  asin,
  atan,
  atan2,
  cos,
  sin,
  tan,
  cot,
} from './func_math';
import {
  length,
  concat,
  left,
  right,
  lower,
  upper,
  trim,
  ltrim,
  rtrim,
  reverse,
  repeat,
  char_length,
  substring,
  replace,
  ascii,
  ord,
  space,
  hex,
  unhex,
  concat_ws,
  lpad,
  rpad,
  locate,
  instr,
  strcmp,
  charset,
  collation,
  bit_length,
  soundex,
  quote,
  elt,
  field,
  find_in_set,
  substring_index,
  insert_func,
  make_set,
  export_set,
  format_func,
  char_func,
} from './func_string';
import {
  now,
  from_unixtime,
  date,
  date_format,
  datediff,
  curdate,
  unix_timestamp,
  year,
  month,
  day,
  date_add,
  date_sub,
  timestampdiff,
  dayofweek,
  dayname,
  monthname,
  dayofyear,
  week,
  weekday,
  quarter,
  last_day,
  weekofyear,
  yearweek,
  utc_date,
  utc_timestamp,
} from './func_date';
import {
  curtime,
  time,
  hour,
  minute,
  second,
  microsecond,
  utc_time,
} from './func_time';
import { coalesce, ifnull, greatest, least } from './func_comp';
import { nullif } from './compare';
import {
  database,
  isnull,
  sleep,
  not,
  ifFunc,
  user,
  version,
  connection_id,
} from './func_misc';

export const methods: Record<
  string,
  undefined | ((expr: Function, state: EvaluationState) => EvaluationResult)
> = {
  database,
  schema: database,
  isnull,
  sleep,
  length,
  octet_length: length,
  char_length,
  character_length: char_length,
  concat,
  left,
  right,
  lower,
  lcase: lower,
  upper,
  ucase: upper,
  trim,
  ltrim,
  rtrim,
  reverse,
  repeat,
  substring,
  substr: substring,
  mid: substring,
  replace,
  ascii,
  ord,
  space,
  hex,
  unhex,
  concat_ws,
  lpad,
  rpad,
  locate,
  instr,
  position: locate,
  strcmp,
  charset,
  collation,
  bit_length,
  soundex,
  quote,
  elt,
  field,
  find_in_set,
  substring_index,
  insert: insert_func,
  make_set,
  export_set,
  format: format_func,
  char: char_func,
  abs,
  ceil,
  ceiling: ceil,
  floor,
  round,
  mod,
  pow,
  power: pow,
  sqrt,
  sign,
  bin,
  oct,
  pi,
  degrees,
  radians,
  exp,
  ln,
  log,
  log2,
  log10,
  acos,
  asin,
  atan,
  atan2,
  cos,
  sin,
  tan,
  cot,
  greatest,
  least,
  not,
  coalesce,
  ifnull,
  nullif,
  if: ifFunc,
  now,
  sysdate: now,
  localtime: now,
  localtimestamp: now,
  current_timestamp: now,
  from_unixtime,
  date,
  date_format,
  date_add,
  adddate: date_add,
  date_sub,
  subdate: date_sub,
  datediff,
  timestampdiff,
  curdate,
  current_date: curdate,
  curtime,
  current_time: curtime,
  unix_timestamp,
  year,
  month,
  day,
  dayofmonth: day,
  hour,
  minute,
  second,
  dayofweek,
  dayname,
  monthname,
  dayofyear,
  week,
  weekday,
  quarter,
  time,
  microsecond,
  last_day,
  weekofyear,
  yearweek,
  utc_date,
  utc_time,
  utc_timestamp,
  user,
  current_user: user,
  session_user: user,
  system_user: user,
  version,
  connection_id,
};
