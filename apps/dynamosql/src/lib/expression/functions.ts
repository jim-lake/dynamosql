import type { Function } from 'node-sql-parser';
import type { EvaluationState, EvaluationResult } from './evaluate';

import {
  abs,
  ceil,
  floor,
  round,
  mod,
  pow,
  sqrt,
  sign,
  pi,
  degrees,
  radians,
  exp,
} from './func_math_basic';
import {
  ln,
  log,
  log2,
  log10,
  acos,
  asin,
  atan,
  atan2,
  cos,
  sin,
  tan,
  cot,
  bin,
  oct,
  bit_count,
  conv,
  truncate_func,
  rand,
} from './func_math_advanced';
import {
  length,
  concat,
  left,
  right,
  lower,
  upper,
  trim,
  ltrim,
  rtrim,
  reverse,
  repeat,
  char_length,
  substring,
  replace,
  ascii,
  ord,
  space,
  concat_ws,
  lpad,
  rpad,
  locate,
  instr,
  strcmp,
  substring_index,
  insert_func,
} from './func_string_basic';
import {
  hex,
  unhex,
  charset,
  collation,
  bit_length,
  soundex,
  quote,
  md5,
  sha1,
  sha2,
  crc32,
  to_base64,
  from_base64,
  uuid,
  is_uuid,
  inet_aton,
  inet_ntoa,
} from './func_string_encoding';
import {
  elt,
  field,
  find_in_set,
  make_set,
  export_set,
  format_func,
  char_func,
} from './func_string_advanced';
import {
  now,
  from_unixtime,
  date,
  curdate,
  unix_timestamp,
  year,
  month,
  day,
  dayofweek,
  dayofyear,
  weekday,
  quarter,
  utc_date,
  utc_timestamp,
  from_days,
  to_days,
  to_seconds,
} from './func_date_basic';
import {
  date_format,
  datediff,
  date_add,
  date_sub,
  timestampdiff,
  dayname,
  monthname,
  week,
  last_day,
  weekofyear,
  yearweek,
  makedate,
} from './func_date_calc';
import {
  curtime,
  time,
  hour,
  minute,
  second,
  microsecond,
  utc_time,
  sec_to_time,
  time_to_sec,
  maketime,
} from './func_time';
import { coalesce, ifnull, greatest, least } from './func_comp';
import { nullif } from './compare';
import {
  database,
  isnull,
  sleep,
  not,
  ifFunc,
  user,
  version,
  connection_id,
} from './func_misc';

export const methods: Record<
  string,
  undefined | ((expr: Function, state: EvaluationState) => EvaluationResult)
> = {
  database,
  schema: database,
  isnull,
  sleep,
  length,
  octet_length: length,
  char_length,
  character_length: char_length,
  concat,
  left,
  right,
  lower,
  lcase: lower,
  upper,
  ucase: upper,
  trim,
  ltrim,
  rtrim,
  reverse,
  repeat,
  substring,
  substr: substring,
  mid: substring,
  replace,
  ascii,
  ord,
  space,
  hex,
  unhex,
  concat_ws,
  lpad,
  rpad,
  locate,
  instr,
  position: locate,
  strcmp,
  charset,
  collation,
  bit_length,
  soundex,
  quote,
  elt,
  field,
  find_in_set,
  substring_index,
  insert: insert_func,
  make_set,
  export_set,
  format: format_func,
  char: char_func,
  md5,
  sha1,
  sha: sha1,
  sha2,
  to_base64,
  from_base64,
  uuid,
  is_uuid,
  inet_aton,
  inet_ntoa,
  abs,
  ceil,
  ceiling: ceil,
  floor,
  round,
  mod,
  pow,
  power: pow,
  sqrt,
  sign,
  bin,
  bit_count,
  crc32,
  conv,
  truncate: truncate_func,
  rand,
  oct,
  pi,
  degrees,
  radians,
  exp,
  ln,
  log,
  log2,
  log10,
  acos,
  asin,
  atan,
  atan2,
  cos,
  sin,
  tan,
  cot,
  greatest,
  least,
  not,
  coalesce,
  ifnull,
  nullif,
  if: ifFunc,
  now,
  sysdate: now,
  localtime: now,
  localtimestamp: now,
  current_timestamp: now,
  from_unixtime,
  date,
  date_format,
  date_add,
  adddate: date_add,
  date_sub,
  subdate: date_sub,
  datediff,
  timestampdiff,
  curdate,
  current_date: curdate,
  curtime,
  current_time: curtime,
  unix_timestamp,
  year,
  month,
  day,
  dayofmonth: day,
  hour,
  minute,
  second,
  dayofweek,
  dayname,
  monthname,
  dayofyear,
  week,
  weekday,
  quarter,
  time,
  microsecond,
  last_day,
  weekofyear,
  yearweek,
  utc_date,
  utc_time,
  utc_timestamp,
  from_days,
  to_days,
  to_seconds,
  sec_to_time,
  time_to_sec,
  makedate,
  maketime,
  user,
  current_user: user,
  session_user: user,
  system_user: user,
  version,
  connection_id,
};
